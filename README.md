# üè¶ My Finance App

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –ª–∏—á–Ω—ã—Ö —Ñ–∏–Ω–∞–Ω—Å–æ–≤ —Å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–µ–π —Å –±–∞–Ω–∫–æ–≤—Å–∫–∏–º–∏ –≤—ã–ø–∏—Å–∫–∞–º–∏ –∏ —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã–º–∏ API.

## üöÄ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- üìä –ó–∞–≥—Ä—É–∑–∫–∞ –∏ –∞–Ω–∞–ª–∏–∑ –±–∞–Ω–∫–æ–≤—Å–∫–∏—Ö –≤—ã–ø–∏—Å–æ–∫ –≤ —Ñ–æ—Ä–º–∞—Ç–µ Excel
- üìà –ê–Ω–∞–ª–∏–∑ —Ä–∞—Å—Ö–æ–¥–æ–≤ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º
- üí∞ –†–∞—Å—á–µ—Ç –∫—ç—à–±—ç–∫–∞ –∏ –±–æ–Ω—É—Å–æ–≤
- üåê –ü–æ–ª—É—á–µ–Ω–∏–µ –∞–∫—Ç—É–∞–ª—å–Ω—ã—Ö –∫—É—Ä—Å–æ–≤ –≤–∞–ª—é—Ç
- üìâ –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ü–µ–Ω –∞–∫—Ü–∏–π
- üìÖ –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –æ–ø–µ—Ä–∞—Ü–∏–π –ø–æ –¥–∞—Ç–µ
- üè† –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Å –æ–±—â–µ–π —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–æ–π
- üìä –î–µ—Ç–∞–ª—å–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Å–æ–±—ã—Ç–∏–π

## üõ† –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

- **FastAPI** - –≤–µ–±-—Ñ—Ä–µ–π–º–≤–æ—Ä–∫
- **Pandas** - –æ–±—Ä–∞–±–æ—Ç–∫–∞ Excel —Ñ–∞–π–ª–æ–≤
- **Pydantic** - –≤–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
- **Poetry** - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏
- **Pytest** - —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- **Mypy** - —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∞—è —Ç–∏–ø–∏–∑–∞—Ü–∏—è

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞
my_finance_app/
‚îú‚îÄ‚îÄ src/
‚îÇ ‚îú‚îÄ‚îÄ main.py # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞ FastAPI
‚îÇ ‚îú‚îÄ‚îÄ config.py # –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îÇ ‚îú‚îÄ‚îÄ models/
‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ operation.py # –ú–æ–¥–µ–ª—å —Ñ–∏–Ω–∞–Ω—Å–æ–≤–æ–π –æ–ø–µ—Ä–∞—Ü–∏–∏
‚îÇ ‚îú‚îÄ‚îÄ services/
‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ excel_processor.py # –û–±—Ä–∞–±–æ—Ç–∫–∞ Excel —Ñ–∞–π–ª–æ–≤
‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ analyzer.py # –ê–Ω–∞–ª–∏–∑ —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö
‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ finance_api.py # –í–Ω–µ—à–Ω–∏–µ API (–≤–∞–ª—é—Ç—ã, –∞–∫—Ü–∏–∏)
‚îÇ ‚îî‚îÄ‚îÄ views/
‚îÇ ‚îú‚îÄ‚îÄ home.py # –õ–æ–≥–∏–∫–∞ –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã
‚îÇ ‚îî‚îÄ‚îÄ events.py # –õ–æ–≥–∏–∫–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—ã —Å–æ–±—ã—Ç–∏–π
‚îú‚îÄ‚îÄ tests/
‚îÇ ‚îú‚îÄ‚îÄ test_models.py # –¢–µ—Å—Ç—ã –º–æ–¥–µ–ª–µ–π
‚îÇ ‚îú‚îÄ‚îÄ test_views.py # –¢–µ—Å—Ç—ã –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–π
‚îÇ ‚îî‚îÄ‚îÄ test_services/
‚îÇ ‚îú‚îÄ‚îÄ test_finance_api.py # –¢–µ—Å—Ç—ã API
‚îÇ ‚îú‚îÄ‚îÄ test_analyzer.py # –¢–µ—Å—Ç—ã –∞–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä–∞
‚îÇ ‚îî‚îÄ‚îÄ test_excel_processor.py # –¢–µ—Å—Ç—ã –æ–±—Ä–∞–±–æ—Ç–∫–∏ Excel
‚îú‚îÄ‚îÄ data/
‚îÇ ‚îî‚îÄ‚îÄ operations.xlsx # –ü—Ä–∏–º–µ—Ä –±–∞–Ω–∫–æ–≤—Å–∫–æ–π –≤—ã–ø–∏—Å–∫–∏
‚îú‚îÄ‚îÄ .env # –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
‚îú‚îÄ‚îÄ .flake8 # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Flake8
‚îú‚îÄ‚îÄ pyproject.toml # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ Poetry
‚îú‚îÄ‚îÄ user_settings.json # –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
‚îî‚îÄ‚îÄ README.md # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

## ‚ö° –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
poetry install
```
### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è
#### –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª .env:
```env
EXCEL_FILE_PATH=data/operations.xlsx
SUPPORTED_CURRENCIES=USD,EUR,GBP,CNY
SUPPORTED_STOCKS=AAPL,GOOGL,MSFT,TSLA,AMZN
```
### 3. –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
```bash
poetry run python src/main.py
```
## üìä API Endpoints
### –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞
```text
GET /
```
–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:
 - date - –¥–∞—Ç–∞ –≤ —Ñ–æ—Ä–º–∞—Ç–µ YYYY-MM-DD HH:MM:SS (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

### –°—Ç—Ä–∞–Ω–∏—Ü–∞ —Å–æ–±—ã—Ç–∏–π
```text
GET /events/{date_str}?period=[W|M|Y|ALL]
```
–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:
 - date_str - –¥–∞—Ç–∞ –≤ —Ñ–æ—Ä–º–∞—Ç–µ YYYY-MM-DD HH:MM:SS
 - period - –ø–µ—Ä–∏–æ–¥ (W - –Ω–µ–¥–µ–ª—è, M - –º–µ—Å—è—Ü, Y - –≥–æ–¥, ALL - –≤—Å–µ –≤—Ä–µ–º—è)

## üìã –§–æ—Ä–º–∞—Ç Excel —Ñ–∞–π–ª–∞
 - –§–∞–π–ª –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å —Å–ª–µ–¥—É—é—â–∏–µ –∫–æ–ª–æ–Ω–∫–∏:

 - –î–∞—Ç–∞ –æ–ø–µ—Ä–∞—Ü–∏–∏ - –¥–∞—Ç–∞ –∏ –≤—Ä–µ–º—è –æ–ø–µ—Ä–∞—Ü–∏–∏

 - –î–∞—Ç–∞ –ø–ª–∞—Ç–µ–∂–∞ - –¥–∞—Ç–∞ –ø—Ä–æ–≤–µ–¥–µ–Ω–∏—è –ø–ª–∞—Ç–µ–∂–∞

 - –ù–æ–º–µ—Ä –∫–∞—Ä—Ç—ã - –º–∞—Å–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –Ω–æ–º–µ—Ä –∫–∞—Ä—Ç—ã

 - –°—Ç–∞—Ç—É—Å - —Å—Ç–∞—Ç—É—Å –æ–ø–µ—Ä–∞—Ü–∏–∏

 - –°—É–º–º–∞ –æ–ø–µ—Ä–∞—Ü–∏–∏ - —Å—É–º–º–∞ —Å –∑–Ω–∞–∫–æ–º (- –¥–ª—è —Ä–∞—Å—Ö–æ–¥–æ–≤)

 - –í–∞–ª—é—Ç–∞ –æ–ø–µ—Ä–∞—Ü–∏–∏ - –≤–∞–ª—é—Ç–∞ –æ–ø–µ—Ä–∞—Ü–∏–∏

 - –ö—ç—à–±—ç–∫ - –Ω–∞—á–∏—Å–ª–µ–Ω–Ω—ã–π –∫—ç—à–±—ç–∫

 - –ö–∞—Ç–µ–≥–æ—Ä–∏—è - –∫–∞—Ç–µ–≥–æ—Ä–∏—è –æ–ø–µ—Ä–∞—Ü–∏–∏

 - MCC - –∫–æ–¥ –º–µ—Ä—á–∞–Ω—Ç–∞

 - –û–ø–∏—Å–∞–Ω–∏–µ - –æ–ø–∏—Å–∞–Ω–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏

 - –ë–æ–Ω—É—Å—ã - –Ω–∞—á–∏—Å–ª–µ–Ω–Ω—ã–µ –±–æ–Ω—É—Å—ã

 - –û–∫—Ä—É–≥–ª–µ–Ω–∏–µ - –æ–∫—Ä—É–≥–ª–µ–Ω–∏–µ –Ω–∞ –∏–Ω–≤–µ—Å—Ç–∫–æ–ø–∏–ª–∫—É

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
### –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Ç–µ—Å—Ç–æ–≤
```bash
poetry run pytest
```
### –ó–∞–ø—É—Å–∫ —Å –ø–æ–∫—Ä—ã—Ç–∏–µ–º
```bash
poetry run pytest --cov=src --cov-report=html
```
### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∏–ø–æ–≤
```bash
poetry run mypy src/
```
### –õ–∏–Ω—Ç–∏–Ω–≥
```bash
poetry run flake8 src/
poetry run black --check src/
poetry run isort --check src/
```
## ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞
### –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
#### –°–æ–∑–¥–∞–π—Ç–µ user_settings.json:

```json
{
  "user_currencies": ["USD", "EUR"],
  "user_stocks": ["AAPL", "GOOGL"]
}
```
## üîÆ –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
### –ê–Ω–∞–ª–∏–∑ —Ä–∞—Å—Ö–æ–¥–æ–≤ –∑–∞ –º–µ—Å—è—Ü
```python
from src.services.excel_processor import load_operations_from_excel
from src.services.analyzer import analyze_spending

operations = load_operations_from_excel("data/operations.xlsx")
analysis = analyze_spending(operations)

print(f"–û–±—â–∏–µ —Ä–∞—Å—Ö–æ–¥—ã: {analysis['total_spent']}")
print("–ü–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º:", analysis['by_category'])
–ü–æ–ª—É—á–µ–Ω–∏–µ –∫—É—Ä—Å–æ–≤ –≤–∞–ª—é—Ç
```
```python
from src.services.finance_api import get_currency_rates

rates = get_currency_rates()
print("–ö—É—Ä—Å USD:", rates["USD"])
print("–ö—É—Ä—Å EUR:", rates["EUR"])
```
## üêõ Troubleshooting
### common issues:
1. –§–∞–π–ª –Ω–µ –Ω–∞–π–¥–µ–Ω - —É–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ —Ñ–∞–π–ª operations.xlsx exists –≤ –ø–∞–ø–∫–µ data/

2. –û—à–∏–±–∫–∏ —Ñ–æ—Ä–º–∞—Ç–∞ - –ø—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—É Excel —Ñ–∞–π–ª–∞

3. –ü—Ä–æ–±–ª–µ–º—ã —Å API - –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö —Å–µ—Ç–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è fallback –∑–Ω–∞—á–µ–Ω–∏—è

### –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
#### –î–ª—è debug –¥–æ–±–∞–≤—å—Ç–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ –Ω—É–∂–Ω—ã—Ö –º–æ–¥—É–ª—è—Ö:

```python
import logging
logging.basicConfig(level=logging.DEBUG)
```
## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è
MIT License

## ü§ù Contributing
 - –§–æ—Ä–∫–Ω–∏—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π

 - –°–æ–∑–¥–∞–π—Ç–µ feature branch

 - Commit your changes

 - Push to the branch

 - Create a Pull Request

