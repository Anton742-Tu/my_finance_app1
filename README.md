# üè¶ My Finance App

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –ª–∏—á–Ω—ã—Ö —Ñ–∏–Ω–∞–Ω—Å–æ–≤ —Å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–µ–π —Å –±–∞–Ω–∫–æ–≤—Å–∫–∏–º–∏ –≤—ã–ø–∏—Å–∫–∞–º–∏ –∏ —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã–º–∏ API.

## üöÄ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### üìä –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
- –ó–∞–≥—Ä—É–∑–∫–∞ –∏ –∞–Ω–∞–ª–∏–∑ –±–∞–Ω–∫–æ–≤—Å–∫–∏—Ö –≤—ã–ø–∏—Å–∫–æ–∫ –≤ —Ñ–æ—Ä–º–∞—Ç–µ Excel
- –ê–Ω–∞–ª–∏–∑ —Ä–∞—Å—Ö–æ–¥–æ–≤ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º
- –†–∞—Å—á–µ—Ç –∫—ç—à–±—ç–∫–∞ –∏ –±–æ–Ω—É—Å–æ–≤
- –ü–æ–ª—É—á–µ–Ω–∏–µ –∞–∫—Ç—É–∞–ª—å–Ω—ã—Ö –∫—É—Ä—Å–æ–≤ –≤–∞–ª—é—Ç
- –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ü–µ–Ω –∞–∫—Ü–∏–π
- –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –æ–ø–µ—Ä–∞—Ü–∏–π –ø–æ –¥–∞—Ç–µ

### üéØ –°–µ—Ä–≤–∏—Å—ã –∞–Ω–∞–ª–∏–∑–∞
- **–í—ã–≥–æ–¥–Ω—ã–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –∫–µ—à–±—ç–∫–∞** - –∞–Ω–∞–ª–∏–∑ –Ω–∞–∏–±–æ–ª–µ–µ –ø—Ä–∏–±—ã–ª—å–Ω—ã—Ö –∫–∞—Ç–µ–≥–æ—Ä–∏–π
- **–ò–Ω–≤–µ—Å—Ç–∫–æ–ø–∏–ª–∫–∞** - —Ä–∞—Å—á–µ—Ç –Ω–∞–∫–æ–ø–ª–µ–Ω–∏–π —á–µ—Ä–µ–∑ –æ–∫—Ä—É–≥–ª–µ–Ω–∏–µ —Ç—Ä–∞—Ç
- **–ü–æ–∏—Å–∫ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π** - –ø—Ä–æ—Å—Ç–æ–π –ø–æ–∏—Å–∫ –ø–æ –æ–ø–∏—Å–∞–Ω–∏—é –∏ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º
- **–ü–æ–∏—Å–∫ –ø–æ —Ç–µ–ª–µ—Ñ–æ–Ω–∞–º** - –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π —Å –Ω–æ–º–µ—Ä–∞–º–∏ —Ç–µ–ª–µ—Ñ–æ–Ω–æ–≤
- **–ü–µ—Ä–µ–≤–æ–¥—ã —Ñ–∏–∑–ª–∏—Ü–∞–º** - –ø–æ–∏—Å–∫ –ø–µ—Ä–µ–≤–æ–¥–æ–≤ —Ñ–∏–∑–∏—á–µ—Å–∫–∏–º –ª–∏—Ü–∞–º

### üìà –û—Ç—á–µ—Ç—ã
- **–¢—Ä–∞—Ç—ã –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏** - –∞–Ω–∞–ª–∏–∑ —Ä–∞—Å—Ö–æ–¥–æ–≤ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º –∑–∞ –ø–µ—Ä–∏–æ–¥
- **–¢—Ä–∞—Ç—ã –ø–æ –¥–Ω—è–º –Ω–µ–¥–µ–ª–∏** - —Å—Ä–µ–¥–Ω–∏–µ —Ä–∞—Å—Ö–æ–¥—ã –ø–æ –¥–Ω—è–º –Ω–µ–¥–µ–ª–∏
- **–†–∞–±–æ—á–∏–µ/–≤—ã—Ö–æ–¥–Ω—ã–µ –¥–Ω–∏** - —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ —Ç—Ä–∞—Ç –≤ —Ä–∞–∑–Ω—ã–µ —Ç–∏–ø—ã –¥–Ω–µ–π

## üõ† –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

- **FastAPI** - –≤–µ–±-—Ñ—Ä–µ–π–º–≤–æ—Ä–∫
- **Pandas** - –æ–±—Ä–∞–±–æ—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö –∏ –∞–Ω–∞–ª–∏–∑
- **Pydantic** - –≤–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
- **Poetry** - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏
- **Pytest** - —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- **Mypy** - —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∞—è —Ç–∏–ø–∏–∑–∞—Ü–∏—è
- **Logging** - –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–π

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

![img.png](img.png)

## ‚ö° –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç
### 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
```bash
poetry install
```
### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è
#### –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª .env:
```env
EXCEL_FILE_PATH=data/operations.xlsx
SUPPORTED_CURRENCIES=USD,EUR,GBP,CNY
SUPPORTED_STOCKS=AAPL,GOOGL,MSFT,TSLA,AMZN
```
### 3. –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
```bash
poetry run python src/main.py
```
 - –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ –ø–æ –∞–¥—Ä–µ—Å—É: http://localhost:8000
## üìä API Endpoints
### –û—Å–Ω–æ–≤–Ω—ã–µ endpoints
```Text
GET / - –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Å –∞–Ω–∞–ª–∏—Ç–∏–∫–æ–π
GET /events/{date_str} - –°–æ–±—ã—Ç–∏—è —Å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π –ø–æ –¥–∞—Ç–µ
GET /health - –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
```
## üéØ –°–µ—Ä–≤–∏—Å—ã –∞–Ω–∞–ª–∏–∑–∞
```Text
GET /api/cashback-analysis/{year}/{month} - –ê–Ω–∞–ª–∏–∑ –≤—ã–≥–æ–¥–Ω—ã—Ö –∫–∞—Ç–µ–≥–æ—Ä–∏–π –∫–µ—à–±—ç–∫–∞
GET /api/investment-savings/{month} - –†–∞—Å—á–µ—Ç –∏–Ω–≤–µ—Å—Ç–∫–æ–ø–∏–ª–∫–∏
GET /api/search?query=—Ç–µ–∫—Å—Ç - –ü–æ–∏—Å–∫ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π
GET /api/phone-transactions - –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ —Å —Ç–µ–ª–µ—Ñ–æ–Ω–Ω—ã–º–∏ –Ω–æ–º–µ—Ä–∞–º–∏
GET /api/person-transfers - –ü–µ—Ä–µ–≤–æ–¥—ã —Ñ–∏–∑–∏—á–µ—Å–∫–∏–º –ª–∏—Ü–∞–º
```
## üìà –û—Ç—á–µ—Ç—ã
```Text
GET /api/reports/category/{category} - –¢—Ä–∞—Ç—ã –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
GET /api/reports/weekdays - –¢—Ä–∞—Ç—ã –ø–æ –¥–Ω—è–º –Ω–µ–¥–µ–ª–∏
GET /api/reports/day-type - –¢—Ä–∞—Ç—ã –≤ —Ä–∞–±–æ—á–∏–µ/–≤—ã—Ö–æ–¥–Ω—ã–µ –¥–Ω–∏
```
## üìã –§–æ—Ä–º–∞—Ç Excel —Ñ–∞–π–ª–∞
### –§–∞–π–ª –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å —Å–ª–µ–¥—É—é—â–∏–µ –∫–æ–ª–æ–Ω–∫–∏:

 - –î–∞—Ç–∞ –æ–ø–µ—Ä–∞—Ü–∏–∏ - –¥–∞—Ç–∞ –∏ –≤—Ä–µ–º—è –æ–ø–µ—Ä–∞—Ü–∏–∏ (—Ñ–æ—Ä–º–∞—Ç: DD.MM.YYYY HH:MM:SS)
 - –î–∞—Ç–∞ –ø–ª–∞—Ç–µ–∂–∞ - –¥–∞—Ç–∞ –ø—Ä–æ–≤–µ–¥–µ–Ω–∏—è –ø–ª–∞—Ç–µ–∂–∞ (—Ñ–æ—Ä–º–∞—Ç: DD.MM.YYYY)
 - –ù–æ–º–µ—Ä –∫–∞—Ä—Ç—ã - –º–∞—Å–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –Ω–æ–º–µ—Ä –∫–∞—Ä—Ç—ã
 - –°—Ç–∞—Ç—É—Å - —Å—Ç–∞—Ç—É—Å –æ–ø–µ—Ä–∞—Ü–∏–∏ (OK, FAILED, etc.)
 - –°—É–º–º–∞ –æ–ø–µ—Ä–∞—Ü–∏–∏ - —Å—É–º–º–∞ —Å –∑–Ω–∞–∫–æ–º (- –¥–ª—è —Ä–∞—Å—Ö–æ–¥–æ–≤)
 - –í–∞–ª—é—Ç–∞ –æ–ø–µ—Ä–∞—Ü–∏–∏ - –≤–∞–ª—é—Ç–∞ –æ–ø–µ—Ä–∞—Ü–∏–∏ (RUB, USD, etc.)
 - –ö—ç—à–±—ç–∫ - –Ω–∞—á–∏—Å–ª–µ–Ω–Ω—ã–π –∫—ç—à–±—ç–∫
 - –ö–∞—Ç–µ–≥–æ—Ä–∏—è - –∫–∞—Ç–µ–≥–æ—Ä–∏—è –æ–ø–µ—Ä–∞—Ü–∏–∏
 - MCC - –∫–æ–¥ –º–µ—Ä—á–∞–Ω—Ç–∞
 - –û–ø–∏—Å–∞–Ω–∏–µ - –æ–ø–∏—Å–∞–Ω–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏
 - –ë–æ–Ω—É—Å—ã - –Ω–∞—á–∏—Å–ª–µ–Ω–Ω—ã–µ –±–æ–Ω—É—Å—ã
 - –û–∫—Ä—É–≥–ª–µ–Ω–∏–µ - –æ–∫—Ä—É–≥–ª–µ–Ω–∏–µ –Ω–∞ –∏–Ω–≤–µ—Å—Ç–∫–æ–ø–∏–ª–∫—É

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
### –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Ç–µ—Å—Ç–æ–≤
```bash
poetry run pytest
```
### –ó–∞–ø—É—Å–∫ —Å –ø–æ–∫—Ä—ã—Ç–∏–µ–º
```bash
poetry run pytest --cov=src --cov-report=html
```
### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∏–ø–æ–≤
```bash
poetry run mypy src/
```
### –õ–∏–Ω—Ç–∏–Ω–≥
```bash
poetry run flake8 src/
poetry run black --check src/
poetry run isort --check src/
```

## üìä –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è API
### –ê–Ω–∞–ª–∏–∑ –∫–µ—à–±—ç–∫–∞ –∑–∞ —è–Ω–≤–∞—Ä—å 2024
```bash
curl "http://localhost:8000/api/cashback-analysis/2024/1"
```
### –†–∞—Å—á–µ—Ç –∏–Ω–≤–µ—Å—Ç–∫–æ–ø–∏–ª–∫–∏
```bash
curl "http://localhost:8000/api/investment-savings/2024-01?limit=50"
```
### –ü–æ–∏—Å–∫ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π
```bash
curl "http://localhost:8000/api/search?query=–¢–∞–∫—Å–∏"
```
### –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç—á–µ—Ç–æ–≤
```bash
curl "http://localhost:8000/api/reports/category/–°—É–ø–µ—Ä–º–∞—Ä–∫–µ—Ç—ã"
curl "http://localhost:8000/api/reports/weekdays"
curl "http://localhost:8000/api/reports/day-type"
```
## ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞
### –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
#### –°–æ–∑–¥–∞–π—Ç–µ user_settings.json:

```json
{
  "user_currencies": ["USD", "EUR"],
  "user_stocks": ["AAPL", "GOOGL"]
}
```
#### –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞
```bash
# –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
poetry run black src/
poetry run isort src/
```
## üîÆ –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
### –ê–Ω–∞–ª–∏–∑ —Ä–∞—Å—Ö–æ–¥–æ–≤ –∑–∞ –º–µ—Å—è—Ü
```python
from src.services.excel_processor import load_operations_from_excel
from src.services.analyzer import analyze_spending

operations = load_operations_from_excel("data/operations.xlsx")
analysis = analyze_spending(operations)

print(f"–û–±—â–∏–µ —Ä–∞—Å—Ö–æ–¥—ã: {analysis['total_spent']}")
print("–ü–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º:", analysis['by_category'])
```
### –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç—á–µ—Ç–æ–≤
```python
from src.services.reports import category_spending_report, transactions_to_dataframe

df = transactions_to_dataframe(transactions)
report = category_spending_report(df, "–°—É–ø–µ—Ä–º–∞—Ä–∫–µ—Ç—ã", "2024-01-15")
print("–¢—Ä–∞—Ç—ã –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏:", report)
```
## üìã –ù–æ–≤—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã API:
 - GET /api/cashback-analysis/{year}/{month} - –ê–Ω–∞–ª–∏–∑ –∫–µ—à–±—ç–∫–∞ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º

 - GET /api/investment-savings/{month} - –†–∞—Å—á–µ—Ç –∏–Ω–≤–µ—Å—Ç–∫–æ–ø–∏–ª–∫–∏

 - GET /api/search?query=—Ç–µ–∫—Å—Ç - –ü–æ–∏—Å–∫ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π

 - GET /api/phone-transactions - –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ —Å —Ç–µ–ª–µ—Ñ–æ–Ω–∞–º–∏

 - GET /api/person-transfers - –ü–µ—Ä–µ–≤–æ–¥—ã —Ñ–∏–∑–ª–∏—Ü–∞–º

 - GET /health - –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

## üêõ Troubleshooting
### common issues:
1. –§–∞–π–ª –Ω–µ –Ω–∞–π–¥–µ–Ω - —É–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ —Ñ–∞–π–ª operations.xlsx exists –≤ –ø–∞–ø–∫–µ data/

2. –û—à–∏–±–∫–∏ —Ñ–æ—Ä–º–∞—Ç–∞ - –ø—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—É Excel —Ñ–∞–π–ª–∞

3. –ü—Ä–æ–±–ª–µ–º—ã —Å API - –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö —Å–µ—Ç–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è fallback –∑–Ω–∞—á–µ–Ω–∏—è

### –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
#### –î–ª—è debug –¥–æ–±–∞–≤—å—Ç–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ –Ω—É–∂–Ω—ã—Ö –º–æ–¥—É–ª—è—Ö:

```python
import logging
logging.basicConfig(level=logging.DEBUG)
```
## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è
MIT License

## ü§ù Contributing
 - –§–æ—Ä–∫–Ω–∏—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π

 - –°–æ–∑–¥–∞–π—Ç–µ feature branch

 - Commit your changes

 - Push to the branch

 - Create a Pull Request

